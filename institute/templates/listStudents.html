{% extends "base.html" %}
{% block content %}
<DIV class="row">
	<DIV class="col-md-12">
		<DIV class="table-reponsive">
			<table class="table table-striped" data-toggle="table" cellspacing="0" width="100%" id="studentListTable">
				<thead>
					<th data-field="name" data-sortable="true">이름</th>
					<th data-field="contact" data-sortable="true">연락처</th>
					<th data-sortable="false">PIN</th>
					<th data-sortable="false">수정</th>
					<th data-sortable="false">삭제</th>
				</thead>
				<tbody>
{% for student in students %}
					<tr>
						<td>
		{{student.info.sname}}
						</td>
						<td>
		{{student.phonenumber}}
						</td>
						<td>
		{{student.info.personinfo.pin_number}}
						</td>
						<td>
		<p data-placement="top" data-toggle="tooltip" title="Edit" class="p_bottom_0"><button class="btn btn-primary btn-sm updateStudent" data-title="Edit" data-toggle="modal" data-sid="{{student.info.id}}" data-target="#edit" ><span class="glyphicon glyphicon-pencil"></span></button></p>
						</td>
						<td>
		<p data-placement="top" data-toggle="tooltip" title="Delete"><button class="btn btn-danger btn-sm" data-title="Delete" data-toggle="modal" data-sid="{{student.info.sname}}" data-target="#delete" ><span class="glyphicon glyphicon-trash"></span></button></p>
						</td>
					</tr>
{% endfor %}
				</tbody>
			</table>
		</DIV>
	</DIV>
</DIV>

<SCRIPT>
	$(document).ready(function() {
		var table = $('#studentListTable').DataTable({
			"lengthMenu": [10, 25, 50, 100],
		});

		$('.updateStudent').on('click', function(e) {
			location.href = "updateStudentsForm?sid=" + $(this).data('sid')
		});

		// every event is deleted when paging
		$('#studentListTable').on( 'draw.dt', function () {
			$('.updateStudent').on('click', function(e) {
				location.href = "updateStudentsForm?sid=" + $(this).data('sid')
			});
		} );
	});
</SCRIPT>
{% endblock content %}
